<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Design metadata #  Two high-level &ldquo;attributes&rdquo; files are required for all analyses. So long as the basic details of the sampling design they describe do not vary for different measures within a park, or different park units within a network, they only need to be specified once.
The config file tree #  The file tree needed to configure analysis of data from a given park unit (<unit code>) in a given network (<network code>) looks like the following"><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="Design metadata"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://lzachmann.github.io/models-for-missing-data/docs/1-guide/config-files/design-metadata/"><title>Design metadata | Models for missing data</title><link rel=manifest href=/models-for-missing-data/manifest.json><link rel=icon href=/models-for-missing-data/favicon.png type=image/x-icon><link rel=stylesheet href=/models-for-missing-data/book.min.ab46de3e725a6415339a37bba23a0067534a37289b063c9f8d011515a63097a8.css integrity="sha256-q0bePnJaZBUzmje7ojoAZ1NKNyibBjyfjQEVFaYwl6g=" crossorigin=anonymous><script defer src=/models-for-missing-data/flexsearch.min.js></script>
<script defer src=/models-for-missing-data/en.search.min.f319a0fc7c84ce0c37365a73ff979c8462fce3e2f6d5127ede72e0889adda708.js integrity="sha256-8xmg/HyEzgw3Nlpz/5echGL84+L21RJ+3nLgiJrdpwg=" crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-W93Y6ZYE7X"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W93Y6ZYE7X",{anonymize_ip:!1})}</script><link rel=alternate type=application/rss+xml href=https://lzachmann.github.io/models-for-missing-data/docs/1-guide/config-files/design-metadata/index.xml title="Models for missing data"><link rel=stylesheet type=text/css href=/models-for-missing-data/hugo-cite.css></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/models-for-missing-data/><span>Models for missing data</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><span>Getting started</span><ul><li><a href=/models-for-missing-data/docs/0-getting-started/installation/>Installation</a></li><li><a href=/models-for-missing-data/docs/0-getting-started/requirements/>Requirements</a></li><li><a href=/models-for-missing-data/docs/0-getting-started/quickstart/>Quickstart</a></li></ul></li><li><span>Guide</span><ul><li><input type=checkbox id=section-8caa6c4191a21baac8521388e64159fe class=toggle>
<label for=section-8caa6c4191a21baac8521388e64159fe class="flex justify-between"><a role=button>Data</a></label><ul><li><input type=checkbox id=section-640156c4613c586342fd0d8a07f3c84f class=toggle>
<label for=section-640156c4613c586342fd0d8a07f3c84f class="flex justify-between"><a href=/models-for-missing-data/docs/1-guide/data/y-info/>Response data</a></label></li><li><a href=/models-for-missing-data/docs/1-guide/data/x-info/>Covariate data</a></li><li><a href=/models-for-missing-data/docs/1-guide/data/types-of-random-variables/>Types of random variables</a><ul></ul></li></ul></li><li><input type=checkbox id=section-8dd488b1234e35963b6f3e601ec14bab class=toggle checked>
<label for=section-8dd488b1234e35963b6f3e601ec14bab class="flex justify-between"><a href=/models-for-missing-data/docs/1-guide/config-files/>Config files</a></label><ul><li><a href=/models-for-missing-data/docs/1-guide/config-files/design-metadata/ class=active>Design metadata</a><ul></ul></li><li><input type=checkbox id=section-b0711bd475e137288f2ddf3efc3c4d68 class=toggle>
<label for=section-b0711bd475e137288f2ddf3efc3c4d68 class="flex justify-between"><a role=button>Block / the data</a></label><ul><li><a href=/models-for-missing-data/docs/1-guide/config-files/block-data/response-info/>Response info</a></li><li><a href=/models-for-missing-data/docs/1-guide/config-files/block-data/site-loc-info/>Location info</a></li><li><a href=/models-for-missing-data/docs/1-guide/config-files/block-data/covariate-info/>Covariate info</a></li></ul></li><li><input type=checkbox id=section-58d25a6e3ad929b65a958abc65463866 class=toggle>
<label for=section-58d25a6e3ad929b65a958abc65463866 class="flex justify-between"><a role=button>Block / the model</a></label><ul><li><a href=/models-for-missing-data/docs/1-guide/config-files/block-model/likelihood-function/>Likelihood function</a></li><li><a href=/models-for-missing-data/docs/1-guide/config-files/block-model/link-function/>Link function</a></li><li><a href=/models-for-missing-data/docs/1-guide/config-files/block-model/group-level-effects/>Group-level effects</a></li><li><a href=/models-for-missing-data/docs/1-guide/config-files/block-model/variances/>Variances</a></li><li><a href=/models-for-missing-data/docs/1-guide/config-files/block-model/covariates/>Covariates</a></li><li><a href=/models-for-missing-data/docs/1-guide/config-files/block-model/inits/>Initial values</a></li></ul></li><li><input type=checkbox id=section-1703712dc8ea637acd8570256baef9a9 class=toggle>
<label for=section-1703712dc8ea637acd8570256baef9a9 class="flex justify-between"><a role=button>Block / extras</a></label><ul><li><a href=/models-for-missing-data/docs/1-guide/config-files/block-extras/conditions/>Conditions</a></li><li><a href=/models-for-missing-data/docs/1-guide/config-files/block-extras/finite-pop/>Finite population correction</a></li></ul></li></ul></li><li><input type=checkbox id=section-df7f3a5ca6705f2f2328ffa428acc53d class=toggle>
<label for=section-df7f3a5ca6705f2f2328ffa428acc53d class="flex justify-between"><a role=button>Outputs</a></label><ul><li><a href=/models-for-missing-data/docs/1-guide/outputs/object-types/>Object types</a><ul></ul></li><li><input type=checkbox id=section-3bda5b8b8fc55df72a9ad3d5120b13e0 class=toggle>
<label for=section-3bda5b8b8fc55df72a9ad3d5120b13e0 class="flex justify-between"><a href=/models-for-missing-data/docs/1-guide/outputs/output-dir/>The output directory</a></label><ul><li><a href=/models-for-missing-data/docs/1-guide/outputs/output-dir/00-input/>00-input</a><ul></ul></li><li><a href=/models-for-missing-data/docs/1-guide/outputs/output-dir/01-diagnostics/>01-diagnostics</a><ul></ul></li><li><a href=/models-for-missing-data/docs/1-guide/outputs/output-dir/02-checking/>02-checking</a><ul></ul></li><li><a href=/models-for-missing-data/docs/1-guide/outputs/output-dir/03-inference/>03-inference</a><ul></ul></li><li><a href=/models-for-missing-data/docs/1-guide/outputs/output-dir/99-misc/>99-misc</a><ul></ul></li></ul></li></ul></li></ul></li><li><a href=/models-for-missing-data/docs/2-best-practices/>Best practices</a><ul></ul></li><li><a href=/models-for-missing-data/docs/3-faq/>FAQ</a><ul></ul></li></ul><ul><li><a href=/models-for-missing-data/posts/>Posts</a></li><li><a href=https://github.com/lzachmann/models-for-missing-data target=_blank rel=noopener>GitHub</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/models-for-missing-data/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Design metadata</strong>
<label for=toc-control><img src=/models-for-missing-data/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#the-config-file-tree>The config file tree</a><ul><li><a href=#network-level-attributes>Network-level attributes</a></li><li><a href=#park-level-attributes>Park-level attributes</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=design-metadata>Design metadata
<a class=anchor href=#design-metadata>#</a></h1><p>Two high-level &ldquo;attributes&rdquo; files are required for all analyses. So long as the basic details of the sampling design they describe do not vary for different measures within a park, or different park units within a network, they only need to be specified once.</p><h2 id=the-config-file-tree>The config file tree
<a class=anchor href=#the-config-file-tree>#</a></h2><p>The file tree needed to configure analysis of data from a given park unit (<code>&lt;unit code></code>) in a given network (<code>&lt;network code></code>) looks like the following</p><pre><code>. # project root
└── assets
    └── &lt;config dir&gt;/
        └── &lt;network code&gt;/
            ├── &lt;unit code&gt;/
            │   ├── _park-level-attributes.yml
            │   └── &lt;analysis file&gt;.yml
            └── _network-level-attributes.yml
</code></pre><p>The name of <code>&lt;config dir></code> is arbitrary. For the demo analyses it&rsquo;s <code>_config</code>, while for the &ldquo;uplands&rdquo; status and trends work we&rsquo;ve used <code>uplands-config</code>.</p><p>The directory structure, as shown, is relative to the root of the project on your file system. The contents of <code>&lt;analysis file>.yml</code> are described in the ensuing sections of the guide. To take a real-world example from an analysis of species richness data at Little Bighorn Battlefield National Monument (LIBI), in Montana &ndash; a park within Rocky Mountain Network (ROMN) &ndash; the complete file tree might look like the following:</p><pre><code>.
└── assets
    └── uplands-config/
        └── ROMN/
            ├── LIBI/
            │   ├── _park-level-attributes.yml
            │   └── richness.yml
            └── _network-level-attributes.yml
</code></pre><h3 id=network-level-attributes>Network-level attributes
<a class=anchor href=#network-level-attributes>#</a></h3><p>These attributes, which appear in the file <code>_network-level-attributes.yml</code>, consist of several key-value pairs used to define the park unit code (<code>unit code column</code>) by whatever name it goes by in the raw data, the name of the column containing the site ID (<code>site id column</code>), and a nested set of key-value pairs used to describe the date associated with each observation.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-YAML data-lang=YAML><span style=display:flex><span><span style=color:#f92672>unit code column</span>: <span style=color:#ae81ff>Park</span>
</span></span><span style=display:flex><span><span style=color:#f92672>site id column</span>: <span style=color:#ae81ff>SiteName</span>
</span></span><span style=display:flex><span><span style=color:#f92672>event date info</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>date-time column</span>: <span style=color:#ae81ff>Year</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>date-time format</span>: <span style=color:#66d9ef>Y</span>!  <span style=color:#75715e># see lubridate::parse_date_time() for details</span>
</span></span></code></pre></div><p>You can also specify multiple date-time formatting options if individual data files for a network use different datetime standards. Here&rsquo;s another example of a <code>_network-level-attributes.yml</code> file for analyses from Northern Colorado Plateau Network:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-YAML data-lang=YAML><span style=display:flex><span><span style=color:#f92672>unit code column</span>: <span style=color:#ae81ff>Unit_Code</span>
</span></span><span style=display:flex><span><span style=color:#f92672>site id column</span>: <span style=color:#ae81ff>Plot_ID</span>
</span></span><span style=display:flex><span><span style=color:#f92672>event date info</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>date-time column</span>: <span style=color:#ae81ff>Start_Date</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>date-time format</span>:
</span></span><span style=display:flex><span>        - <span style=color:#66d9ef>Y</span>!-<span style=color:#ae81ff>m!*-d! I!:M!:S! </span> <span style=color:#75715e># see lubridate::parse_date_time() for details</span>
</span></span><span style=display:flex><span>        - <span style=color:#66d9ef>Y</span>!-<span style=color:#ae81ff>m!*-d!</span>
</span></span></code></pre></div><h3 id=park-level-attributes>Park-level attributes
<a class=anchor href=#park-level-attributes>#</a></h3><p>Park-level metadata, stored in <code>_park-level-attributes.yml</code>, cannot be defined at a higher level because most, if not all, of this information applies only to an individual park, and not to other park units in the network. Specifically, we use this file to describe the name of the column in the raw data that defines the strata (<code>stratum id column</code>) and the associated stratum areas (<code>stratum area info</code>).</p><p>These areas, in turn, are used internally to compute a weighted mean at the park scale. Each entry beneath <code>stratum area info</code> must correspond to the actual stratum IDs in the column indicated by <code>stratum id column</code>. If there are no strata, then you can supply the same column used by <code>_network-level-attributes.yml</code> to indicate the unit code, and supply a single stratum area for the park.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-YAML data-lang=YAML><span style=display:flex><span><span style=color:#f92672>stratum id column</span>: <span style=color:#ae81ff>MDCATY</span>
</span></span><span style=display:flex><span><span style=color:#f92672>stratum area info</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>Gulley1</span>: <span style=color:#ae81ff>684731</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Gulley2</span>: <span style=color:#ae81ff>138247</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Upland</span>: <span style=color:#ae81ff>1063552</span>
</span></span></code></pre></div><p>The number assigned to each stratum under <code>stratum area info</code> corresponds to the total number of sites &ndash; regardless of the actual units &ndash; that <em>could</em> have been sampled in that stratum. In this example there were <code>684731</code> potentially sampleable sites in <code>Gulley1</code>. The proportion of the park represented by <code>Gulley1</code> is <code>684731 / (684731 + 138247 + 1063552) = 0.3629579</code>.<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></p><p>In most cases, the sites actually sampled in any given stratum represents a tiny fraction of that stratum&rsquo;s area (e.g., &lt;1%). In cases where sampled sites represent a larger proportion of the total stratum area, we may need to apply finite population correction, which we&rsquo;ll describe in another section of this guide.</p><section class=footnotes role=doc-endnotes><hr><ol><li id=fn:1 role=doc-endnote><p>Does the unit of the stratum areas matter so long as they are in the same unit? No, not yet, because these are only used to create the (normalized) stratum weights.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></section></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/lzachmann/models-for-missing-data/commit/5411e9658e3b44022f4ae5d72334acccf72961bb title="Last modified by Luke Zachmann | Apr 1, 2022" target=_blank rel=noopener><img src=/models-for-missing-data/svg/calendar.svg class=book-icon alt=Calendar>
<span>Apr 1, 2022</span></a></div><div><a class="flex align-center" href=https://github.com/lzachmann/models-for-missing-data/edit/main/docs/website/content/docs/1-guide/config-files/design-metadata/_index.md target=_blank rel=noopener><img src=/models-for-missing-data/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><script>(function(){function e(n){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(n),e.removeAllRanges(),e.addRange(t)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#the-config-file-tree>The config file tree</a><ul><li><a href=#network-level-attributes>Network-level attributes</a></li><li><a href=#park-level-attributes>Park-level attributes</a></li></ul></li></ul></nav></div></aside></main></body></html>